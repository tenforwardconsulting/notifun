%h1 Messages

%table.table
  %thead
    %tr
      %th User
      %th Recipient
      %th Sent via
      %th Message Template
      %th Success
      %th Sent At

  %tbody
    - @messages.each do |message|
      - user = User.where(uuid: message.uuid).first
      %tr
        - if user.try(:golfer)
          %td= link_to user.display_name, user.golfer
        - elsif user.try(:caddie)
          %td= link_to user.display_name, user.caddie
        - else
          %td= message.uuid
        %td= message.recipient
        %td= message.notification_method
        - if message.message_template
          %td= link_to message.message_template_key.humanize, edit_notifun_message_template_path(message.message_template)
        - else
          %td= message.message_template_key.humanize
        %td= message.success ? "Yes" : "No"
        %td= message.created_at.strftime("%D %l:%M %Z")
